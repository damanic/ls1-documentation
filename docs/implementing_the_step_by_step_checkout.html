<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">    
<html xmlns="http://www.w3.org/1999/xhtml" class="mac">
<head>
    <title>LemonStand Version 1 - Implementing the Step-By-Step Checkout</title>
  <link rel="shortcut icon" href="../favicon.ico" />
  <link href="http://feeds.feedburner.com/lemonstand" type="application/rss+xml" rel="alternate" title="LemonStand blog" />
  <link href="http://feeds.feedburner.com/LemonstandReleaseNotes" type="application/rss+xml" rel="alternate" title="LemonStand release notes" />

  <link rel="stylesheet" type="text/css" href="../ls_css_combine/index.html@file[]=%252Fresources%252Fcss%252Fgrid.css&amp;file[]=%252Fresources%252Fcss%252Fformsframework.css&amp;file[]=%252Fresources%252Fcss%252Fscreen.css&amp;file[]=%252Fresources%252Fcss%252Fjquery.fancybox.css&amp;file[]=%252Fresources%252.css"/>

  <script type="text/javascript" src="../ls_javascript_combine/index.html@file[]=%252Fresources%252Fjs%252Fjquery-1.7.1.min.js&amp;file[]=%252Fresources%252Fjs%252Ftwitter.js&amp;file[]=%252Fresources%252Fjs%252Fjquery.noconflict.js&amp;file[]=%252Fmodules%252Fcms%252Fresources%252Fjavascript%252Ff"></script>
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic|Playfair+Display:400,400italic' rel='stylesheet' type='text/css'>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Language" content="en"/>
  <meta name="keywords" content="" />
  <meta name="description" content="" />

  <meta property="fb:app_id" content="194533163908263"/>


   
  <link type="text/css" rel="stylesheet" href="../resources/shl/styles/shCore.css" />
  <link type="text/css" rel="stylesheet" href="../resources/shl/styles/shThemeRDark.css" />  
  <script type="text/javascript" src="../ls_javascript_combine/index.html@file[]=%252Fresources%252Fjs%252Fjquery-ui-1.8.11.custom.min.js&amp;file[]=%252Fresources%252Fshl%252Fscripts%252FshCore.js&amp;file[]=%252Fresources%252Fshl%252Fscripts%252FshBrushJScript.js&amp;file[]=%252Fresources%252Fs"></script>
  
  <script type="text/javascript">
    SyntaxHighlighter.config.clipboardSwf = '/resources/shl/scripts/clipboard.swf';
    SyntaxHighlighter.all();
    SyntaxHighlighter.defaults.gutter = false;
	SyntaxHighlighter.config.strings.expandSource = "Click to expand the code block";
        
    window.addEvent('domready', function() {
      var $ = jQuery;

      $(".thumbnailWrap a").fancybox({      
         'zoomSpeedIn': 300,
         'zoomSpeedOut': 300,
         'overlayShow': true,
         'titleShow'      : 'true',
         'overlayOpacity': .6
       });
       
       jQuery(".code-tabs").tabs();
    });
  </script>  
  <link rel="stylesheet" type="text/css" href="../resources/css/syntax_highlightier.css@1.css" />
  <link rel="stylesheet" type="text/css" href="../resources/css/wiki.css@1.css" />
  
</head>
<body id="b_help" class="mac">
  <div id="wrapper">
    <div id="headerWrapper">
	  	<div style="background:#333;color:#fff;text-align:center;padding:20px 0;">
	  		<p style="color:#eaeaea">This is the documentation for LemonStand V1, which has been discontinued. You can <a href="https://lemonstand.com/v1tocloud">learn more and upgrade your store here</a>.</p>
	  	</div>
       <div id="header">
      <a href="../index.html" id="headerLogo"><img src="../resources/i/lemonstand_logo.png" alt="LemonStand" /></a>      
      	<p id="contactUs"><span data-icon="&#xe04f;" aria-hidden="true"></span> <a href="tel://1-855-332-0555"><strong>1-855-332-0555</strong></a> &nbsp;&nbsp;&nbsp;<span data-icon="&#xe03e;" aria-hidden="true"> <a href="mailto:sales@lemonstand.com"><strong>sales@lemonstand.com</strong></a>&nbsp;&nbsp;&nbsp; 
      			<span data-icon="&#xe016;" aria-hidden="true"></span> <a id="myaccont_login" href="http://v1.lemonstand.com/myaccount/"><strong>Log In</strong></a>
			</p>

      <div id="navigation">
		<ul>
		<!-- <li class="dropdown"><span>Tour &#9662;</span>
			<ul>
				<li class="first"><a href="/tour/">Take a Tour</a></li>
				<li class="last"><a href="/features/customization/">Features</a></li>
			</ul>
		</li> -->
		<!--<li><a href="/features/">Features</a></li>
		<li><a href="/gallery/">Gallery</a></li>-->
		<li><a href="http://v1.lemonstand.com/marketplace/">Marketplace</a></li>
		<!--<li><a href="/buy/">Pricing</a></li>-->
		<li class="dropdown last"><span>Resources &#9662;</span>
			<ul>              
			  <li class="first"><a href="../docs.html">Documentation</a></li>
			  <li><a href="api_function_and_class_reference/index.html">API</a></li>
			  <li id="n_forum"><a href="http://forum.lemonstand.com">Forum</a></li>
			  <li><a href="http://v1.lemonstand.com/myaccount/tickets/">Technical Support</a></li>
			  <li><a href="http://forum.lemonstandapp.com/index.php?app=tracker&showproject=2">Issue Tracker</a></li>
			  <li><a href="http://v1.lemonstand.com/release-notes/">Release Notes</a></li>
			  <!--<li><a href="/faq/">FAQ</a></li>-->
			  <li class="last"><a href="http://blog.lemonstand.com">Blog</a></li>
			</ul>
		</li>
		<li class="dropdown"><span>Partners &#9662;</span>
			<ul>
				<li class="first"><a href="../partners.html">Certified Partners</a></li>
				<li class="last"><a href="../hire-developers/index.html">Hire a Freelancer</a></li>
			</ul>
		
		</li>
        </ul>
      </div><!--/navigation-->      
      
      	    </div><!--/header-->
    </div><!-- /headerWrapper -->    
    <!-- <div id="topContentWrapper">  
      <div id="topContent">
        <div id="topCol1">
          <h1>LemonStand <span>Documentation</span></h1>
        </div>
      </div>
    </div> -->
    <div id="contentWrapper">  
      <div id="content" class="clearfix">
        <div class="wrap12">
	        <form method="get" action="http://v1.lemonstand.com/docs_search">
        <div id="wiki_search">
          <input name="query" type="text" id="wiki_search_field"/>
          <input type="submit" id="btn-doc-search" class="awesome blue large" value="Search"/>
          <div class="wiki_clear"></div>
        </div>
      </form>
    </div>
  
          <div class="col12 wiki_page_content">
        <div class="wiki_breadcrumbs"><ul class="wiki_toc"><li><a href="front_page.html">LemonStand</a></li><li><a href="developer_guide.html">Developer Guide</a></li><li><a href="checkout_process.html">Checkout Process</a></li><li class="last">Implementing the Step-By-Step Checkout</li></ul></div>
        <div id="wiki-cta">
        	<h3>LemonStand Version 1 Has Been Discontinued</h1>
        	<p>This documentation is for LemonStand Version 1. LemonStand is now offered as a cloud-based eCommerce platform.<br> You can try the new LemonStand and <a href="https://lemonstand.com/v1tocloud">learn about upgrading here</a>.</p>
        </div>
        
        <h2>Implementing the Step-By-Step Checkout</h2>
        
        <p>This section describes a process of implementing the conventional step-by-step checkout process, where a single page corresponds to a single checkout step. Data in each step can be sent either by a regular POST method, or using the AJAX request. This implementation is based on the <a href="step_by_step_checkout_actions.html">step-by-step checkout actions</a>, described in the API section of the documentation.&nbsp;</p>
<p>All pages in this tutorial use the AJAX method for sending data to the server. Please note that each page, except the Order Review page, have a hidden field with the name <strong>redirect</strong>, which contains the URL of a page, corresponding to a next page. You need to use the actual URLs of the pages in your online store.&nbsp;<strong>Note:</strong> if your copy of LemonStand is installed in a subdirectory, you need to use the <a href="http://v1.lemonstand.com/docs/root_url">root_url()</a> function in the <strong>redirect</strong> field value to generate correct URLs referring to LemonStand pages.</p>
<h3>Step 1: the billing address page</h3>
<p>The billing address page contains a form for entering a customer's billing address and contact information. This page should be based on the&nbsp;<a href="shop_checkout_billing_info.html">shop:checkout_billing_info</a> action. The following snippet contains code which you can use on the billing address page.</p>
<div class="codeblock"><pre class="brush:php; collapse: true">&lt;h3&gt;Billing Information&lt;/h3&gt;

&lt;?= open_form() ?&gt;
  &lt;?= flash_message() ?&gt;

  &lt;? if ($this-&gt;customer): ?&gt;
    &lt;p&gt;Bill to: &lt;strong&gt;&lt;?= h($this-&gt;customer-&gt;name) ?&gt;, &lt;?= $this-&gt;customer-&gt;email ?&gt;&lt;/strong&gt;.&lt;/p&gt;
  &lt;? endif ?&gt;
  
  &lt;? if (!$this-&gt;customer): ?&gt;
    &lt;label for=&quot;first_name&quot;&gt;First Name&lt;/label&gt;
    &lt;input name=&quot;first_name&quot; value=&quot;&lt;?= h($billing_info-&gt;first_name) ?&gt;&quot; id=&quot;first_name&quot; type=&quot;text&quot;/&gt;&lt;br/&gt;
    
    &lt;label for=&quot;last_name&quot;&gt;Last Name&lt;/label&gt;
    &lt;input name=&quot;last_name&quot; value=&quot;&lt;?= h($billing_info-&gt;last_name) ?&gt;&quot; id=&quot;last_name&quot; type=&quot;text&quot;/&gt;&lt;br/&gt;
    
    &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
    &lt;input id=&quot;email&quot; name=&quot;email&quot; value=&quot;&lt;?= h($billing_info-&gt;email) ?&gt;&quot; type=&quot;text&quot;/&gt;&lt;br/&gt;
  &lt;? endif ?&gt;
  
  &lt;label for=&quot;company&quot;&gt;Company&lt;/label&gt;
  &lt;input id=&quot;company&quot; type=&quot;text&quot; value=&quot;&lt;?= h(post('company', $billing_info-&gt;company)) ?&gt;&quot; name=&quot;company&quot;/&gt;&lt;br/&gt;

  &lt;label for=&quot;phone&quot;&gt;Phone&lt;/label&gt;
  &lt;input id=&quot;phone&quot; type=&quot;text&quot; value=&quot;&lt;?= h($billing_info-&gt;phone) ?&gt;&quot; name=&quot;phone&quot;/&gt;&lt;br/&gt;

  &lt;label for=&quot;street_address&quot;&gt;Street Address&lt;/label&gt;
  &lt;input id=&quot;street_address&quot; name=&quot;street_address&quot; type=&quot;text&quot; value=&quot;&lt;?= h($billing_info-&gt;street_address) ?&gt;&quot;/&gt;&lt;br/&gt;

  &lt;label for=&quot;city&quot;&gt;City&lt;/label&gt;
  &lt;input id=&quot;city&quot; type=&quot;text&quot; name=&quot;city&quot; value=&quot;&lt;?= h($billing_info-&gt;city) ?&gt;&quot;/&gt;&lt;br/&gt;

  &lt;label for=&quot;zip&quot;&gt;Zip/Postal Code&lt;/label&gt;
  &lt;input id=&quot;zip&quot; type=&quot;text&quot; name=&quot;zip&quot; value=&quot;&lt;?= h($billing_info-&gt;zip) ?&gt;&quot;/&gt;&lt;br/&gt;

  &lt;label for=&quot;country&quot;&gt;Country&lt;/label&gt;
  &lt;select id=&quot;country&quot; name=&quot;country&quot; onchange=&quot;return this.getForm().sendRequest(
      'shop:on_updateStateList', {
        extraFields: {
          'country': $('#country').val(), 
          'control_name': 'state', 
          'control_id': 'state', 
          'current_state': '&lt;?= $billing_info-&gt;state ?&gt;'},
        update: {'billing_states': 'shop:state_selector'}
    })&quot;&gt;
    &lt;? foreach ($countries as $country): ?&gt;
    &lt;option &lt;?= option_state($billing_info-&gt;country, $country-&gt;id) ?&gt; value=&quot;&lt;?= h($country-&gt;id) ?&gt;&quot;&gt;&lt;?= h($country-&gt;name) ?&gt;&lt;/option&gt;
    &lt;? endforeach ?&gt;
  &lt;/select&gt;&lt;br/&gt;

  &lt;label for=&quot;state&quot;&gt;State&lt;/label&gt;
  &lt;div id=&quot;billing_states&quot;&gt;
    &lt;?= $this-&gt;render_partial('shop:state_selector', array(
      'states'=&gt;$states, 
      'control_id'=&gt;'state', 
      'control_name'=&gt;'state', 
      'current_state'=&gt;$billing_info-&gt;state)) ?&gt;
  &lt;/div&gt;
  
  &lt;input type=&quot;hidden&quot; value=&quot;/checkout_shipping_information&quot; name=&quot;redirect&quot;/&gt;
  
  &lt;input 
    type=&quot;image&quot;
    src=&quot;/resources/images/btn_next.gif&quot; 
    alt=&quot;Next&quot; 
    onclick=&quot;return $(this).getForm().sendRequest('shop:on_checkoutSetBillingInfo')&quot;/&gt;
&lt;/form&gt;</pre></div><p>The code of the billing and shipping information pages are similar to the checkout partials described in the&nbsp;AJAX-driven single-page checkout section. Please refer to the&nbsp;<a href="creating_billing_information_partial.html">Creating the Billing Information partial</a> for explanation how the state list update works.</p>
<h3>Step 2: the shipping address page</h3>
<p>The shipping address page contains a form for entering a customer's shipping address and contact information. This page should be based on the&nbsp;<a href="shop_checkout_shipping_info.html">shop:checkout_shipping_info</a> action. The shipping address page can contain a link or button, which copies the billing address into a shipping address form. When a customer clicks this button (or link), the shipping information form is updated using the AJAX request. It means that the whole shipping information form should be placed into a separate partial.&nbsp;</p>
<p>The following snippet contains code which you can use for creating the shipping address page.&nbsp;</p>
<div class="codeblock"><pre class="brush:php; collapse: true">&lt;h3&gt;Shipping Information&lt;/h3&gt;

&lt;?= open_form() ?&gt;
  &lt;?= flash_message() ?&gt;
  &lt;p&gt;Copy &lt;a href=&quot;#&quot; onclick=&quot;return $(this).getForm().sendRequest('shop:on_copyBillingInfo', {update:{'shipping_info_form': 'shop:shipping_info_checkout_step'}})&quot;&gt;billing information&lt;/a&gt;.&lt;p&gt;

  &lt;div id=&quot;shipping_info_form&quot;&gt;
    &lt;? $this-&gt;render_partial('shop:shipping_info_checkout_step') ?&gt;
  &lt;/div&gt;

  &lt;input type=&quot;hidden&quot; name=&quot;redirect&quot; value=&quot;/checkout_shipping_method&quot;/&gt;
  &lt;input 
    type=&quot;image&quot;
    src=&quot;/resources/images/btn_next.gif&quot;
    alt=&quot;Next&quot; 
    onclick=&quot;return $(this).getForm().sendRequest('shop:on_checkoutSetShippingInfo')&quot;/&gt;
&lt;/form&gt;  </pre></div><p>The partial&nbsp;shop:shipping_info_checkout_step, referred in the code snippet, contains a shipping information form. This partial can contain the following code:</p>
<div class="codeblock"><pre class="brush:php; collapse: true">&lt;label for=&quot;first_name&quot;&gt;First Name&lt;/label&gt;
&lt;input id=&quot;first_name&quot; name=&quot;first_name&quot; type=&quot;text&quot; value=&quot;&lt;?= h($shipping_info-&gt;first_name) ?&gt;&quot;/&gt;&lt;br/&gt;

&lt;label for=&quot;last_name&quot;&gt;Last Name&lt;/label&gt;
&lt;input id=&quot;last_name&quot; name=&quot;last_name&quot; type=&quot;text&quot; value=&quot;&lt;?= h($shipping_info-&gt;last_name) ?&gt;&quot;/&gt;&lt;br/&gt;

&lt;label for=&quot;company&quot;&gt;Company&lt;/label&gt;
&lt;input id=&quot;company&quot; type=&quot;text&quot; value=&quot;&lt;?= h($shipping_info-&gt;company) ?&gt;&quot; name=&quot;company&quot;/&gt;&lt;br/&gt;

&lt;label for=&quot;phone&quot;&gt;Phone&lt;/label&gt;
&lt;input id=&quot;phone&quot; type=&quot;text&quot; value=&quot;&lt;?= h($shipping_info-&gt;phone) ?&gt;&quot; name=&quot;phone&quot;/&gt;&lt;br/&gt;

&lt;label for=&quot;street_address&quot;&gt;Street Address&lt;/label&gt;
&lt;input id=&quot;street_address&quot; name=&quot;street_address&quot; type=&quot;text&quot; value=&quot;&lt;?= h($shipping_info-&gt;street_address) ?&gt;&quot;/&gt;&lt;br/&gt;

&lt;label for=&quot;city&quot;&gt;City&lt;/label&gt;
&lt;input id=&quot;city&quot; type=&quot;text&quot; name=&quot;city&quot; value=&quot;&lt;?= h($shipping_info-&gt;city) ?&gt;&quot;/&gt;&lt;br/&gt;

&lt;label for=&quot;zip&quot;&gt;Zip/Postal Code&lt;/label&gt;
&lt;input id=&quot;zip&quot; type=&quot;text&quot; name=&quot;zip&quot; value=&quot;&lt;?= h($shipping_info-&gt;zip) ?&gt;&quot;/&gt;&lt;br/&gt;

&lt;label for=&quot;country&quot;&gt;Country&lt;/label&gt;
&lt;select id=&quot;country&quot; name=&quot;country&quot; onchange=&quot;return $('#country').getForm().sendRequest(
  'shop:on_updateStateList', {
    extraFields: {
      'country': $('#country').val(), 
      'control_name': 'state', 
      'control_id': 'state', 
      'current_state': '&lt;?= $shipping_info-&gt;state ?&gt;'},
    update: {'shipping_states': 'shop:state_selector'}
  })&quot;&gt;
  &lt;? foreach ($countries as $country): ?&gt;
  &lt;option &lt;?= option_state($shipping_info-&gt;country, $country-&gt;id) ?&gt; value=&quot;&lt;?= h($country-&gt;id) ?&gt;&quot;&gt;&lt;?= h($country-&gt;name) ?&gt;&lt;/option&gt;
  &lt;? endforeach ?&gt;
&lt;/select&gt;&lt;br/&gt;

&lt;label for=&quot;state&quot;&gt;State&lt;/label&gt;
&lt;div id=&quot;shipping_states&quot;&gt;
&lt;?= $this-&gt;render_partial('shop:state_selector', array(
  'states'=&gt;$states, 
  'control_id'=&gt;'state', 
  'control_name'=&gt;'state', 
  'current_state'=&gt;$shipping_info-&gt;state)) ?&gt;
&lt;/div&gt;</pre></div><h3>Step 3: the shipping method page</h3>
<p>The shipping method page contains a form which allows a customer to select a shipping method from a list of available shipping methods. This page should be based on the&nbsp;<a href="shop_checkout_shipping_method.html">shop:checkout_shipping_method</a> action. Example of the shipping method page code:</p>
<div class="codeblock"><pre class="brush:php; collapse: true">&lt;h3&gt;Shipping Method&lt;/h3&gt;

&lt;?= open_form() ?&gt;
  &lt;?= flash_message() ?&gt;
  &lt;? if (count($shipping_options)): ?&gt;
    &lt;p&gt;Please select shipping option.&lt;/p&gt;
  
    &lt;? foreach ($shipping_options as $option): ?&gt;
      &lt;? if ($option-&gt;multi_option): ?&gt;
        &lt;h3&gt;
          &lt;?= h($option-&gt;name) ?&gt;
          &lt;? if ($option-&gt;description): ?&gt;
            &lt;br/&gt;&lt;?= h($option-&gt;description) ?&gt;
          &lt;? endif ?&gt;
        &lt;/h3&gt;
      
        &lt;? foreach ($option-&gt;sub_options as $sub_option): ?&gt;
        &lt;input &lt;?= radio_state($option-&gt;id == $shipping_method-&gt;id &amp;&amp; $sub_option-&gt;id == $shipping_method-&gt;sub_option_id) ?&gt; id=&quot;&lt;?= 'option'.$sub_option-&gt;id ?&gt;&quot; type=&quot;radio&quot; name=&quot;shipping_option&quot; value=&quot;&lt;?= $sub_option-&gt;id ?&gt;&quot;/&gt;
          &lt;label for=&quot;&lt;?= 'option'.$sub_option-&gt;id ?&gt;&quot;&gt;
            &lt;?= h($sub_option-&gt;name) ?&gt; -
            &lt;? if (!$option-&gt;is_free): ?&gt;
              &lt;strong&gt;&lt;?= format_currency($sub_option-&gt;quote) ?&gt;&lt;/strong&gt;
            &lt;? else: ?&gt;
              Free!
            &lt;? endif ?&gt;
          &lt;/label&gt;&lt;br/&gt;
        &lt;? endforeach ?&gt;
      &lt;? else: ?&gt;
        &lt;input &lt;?= radio_state($option-&gt;id == $shipping_method-&gt;id) ?&gt; id=&quot;&lt;?= 'option'.$option-&gt;id ?&gt;&quot; type=&quot;radio&quot; name=&quot;shipping_option&quot; value=&quot;&lt;?= $option-&gt;id ?&gt;&quot;/&gt;
        &lt;label for=&quot;&lt;?= 'option'.$option-&gt;id ?&gt;&quot;&gt;
          &lt;strong&gt;&lt;?= h($option-&gt;name) ?&gt;&lt;/strong&gt; - 
          &lt;? if (!$option-&gt;is_free): ?&gt;
            &lt;strong&gt;&lt;?= format_currency($option-&gt;quote) ?&gt;&lt;/strong&gt;
          &lt;? else: ?&gt;
            Free!
          &lt;? endif ?&gt; 
        
          &lt;? if ($option-&gt;description): ?&gt;
            &lt;br/&gt;&lt;?= h($option-&gt;description) ?&gt;
          &lt;? endif ?&gt;
        &lt;/label&gt;&lt;br/&gt;
      &lt;? endif ?&gt;
    &lt;? endforeach ?&gt;
    &lt;input type=&quot;hidden&quot; value=&quot;/checkout_payment_method&quot; name=&quot;redirect&quot;/&gt;
    &lt;input 
      type=&quot;image&quot; 
      src=&quot;/resources/images/btn_next.gif&quot;
      alt=&quot;Next&quot;
      onclick=&quot;return $(this).getForm().sendRequest('shop:on_checkoutSetShippingMethod')&quot;/&gt;
  &lt;? else: ?&gt;
    &lt;p&gt;There are no shipping options available for your location. Please contact our sales department: &lt;a href=&quot;mailto:sales@mystoredotcom&quot;&gt;sales@mystoredotcom&lt;/a&gt;.&lt;/p&gt;
  &lt;? endif ?&gt;
&lt;/form&gt;</pre></div><h3>Step 4: the payment method page</h3>
<p>The payment method page contains a form which allows a customer to select a payment method from a list of available methods. This page should be based on the&nbsp;<a href="shop_checkout_payment_method.html">shop:checkout_payment_method</a>&nbsp;action. Example of the payment method page code:</p>
<div class="codeblock"><pre class="brush:php; collapse: true">&lt;h3&gt;Payment Method&lt;/h3&gt;

&lt;?= open_form() ?&gt;
  &lt;?= flash_message() ?&gt;
  &lt;? if (count($payment_methods)): ?&gt;
    &lt;p&gt;Please select payment method.&lt;/p&gt;
  
    &lt;? foreach ($payment_methods as $method): ?&gt;
      &lt;input &lt;?= radio_state($method-&gt;id == $payment_method-&gt;id) ?&gt; id=&quot;&lt;?= 'method'.$method-&gt;id ?&gt;&quot; type=&quot;radio&quot; name=&quot;payment_method&quot; value=&quot;&lt;?= $method-&gt;id ?&gt;&quot;/&gt;
      &lt;label for=&quot;&lt;?= 'method'.$method-&gt;id ?&gt;&quot;&gt;
        &lt;?= h($method-&gt;name) ?&gt;
        &lt;? if ($method-&gt;description): ?&gt;
        &lt;br&gt;&lt;?= h($method-&gt;description) ?&gt;
        &lt;? endif ?&gt;
      &lt;/label&gt;&lt;br/&gt;
    &lt;? endforeach ?&gt;
    
    &lt;input type=&quot;hidden&quot; name=&quot;redirect&quot; value=&quot;/checkout_order_preview&quot;/&gt;
    &lt;input
      type=&quot;image&quot;
      src=&quot;/resources/images/btn_next.gif&quot;
      alt=&quot;Next&quot;
      onclick=&quot;return $(this).getForm().sendRequest('shop:on_checkoutSetPaymentMethod')&quot;/&gt;
  &lt;? else: ?&gt;
    &lt;p&gt;There are no payment methods available for your location. Please contact our sales department: &lt;a href=&quot;mailto:sales@mystoredotcom&quot;&gt;sales@mystoredotcom&lt;/a&gt;.&lt;/p&gt;
  &lt;? endif ?&gt;
&lt;/form&gt;</pre></div><h3>Step 5: the order review page</h3>
<p>The order review page displays the information gathered during the checkout process along with complete order information. Also this page usually contains the Place Order button. This page should be based on the&nbsp;<a href="shop_checkout_order_review.html">shop:checkout_order_review</a> action. Example of the order review page code:</p>
<div class="codeblock"><pre class="brush:php; collapse: true">&lt;h3&gt;Order Review&lt;/h3&gt;

&lt;?= open_form() ?&gt;
  &lt;?
    $bill_to_str = $billing_info-&gt;as_string();
    $ship_to_str = $shipping_info-&gt;as_string();
    $items = Shop_Cart::list_active_items();
  ?&gt;
  
  &lt;table&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;Cart Items&lt;/th&gt;
        &lt;th&gt;Quantity&lt;/th&gt;
        &lt;th&gt;Price&lt;/th&gt;
        &lt;th&gt;Discount&lt;/th&gt;
        &lt;th&gt;Total&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;? 
        foreach ($items as $item): 
        $options_str = $item-&gt;options_str();
      ?&gt;
      &lt;tr&gt;
        &lt;td&gt;
          &lt;strong&gt;&lt;?= h($item-&gt;product-&gt;name) ?&gt;&lt;/strong&gt;
          &lt;? if (strlen($options_str)): ?&gt;
            &lt;br/&gt;&lt;?= h($options_str) ?&gt;.
          &lt;? endif ?&gt;
          &lt;? if ($item-&gt;extra_options): ?&gt;
            &lt;? foreach ($item-&gt;extra_options as $option): ?&gt;
              &lt;br/&gt;
              + &lt;?= h($option-&gt;description) ?&gt;:
              &lt;?= format_currency($option-&gt;price) ?&gt;
            &lt;? endforeach ?&gt;
          &lt;? endif ?&gt;
        &lt;/td&gt;
        &lt;td&gt;&lt;?= $item-&gt;quantity ?&gt;&lt;/td&gt;
        &lt;td&gt;&lt;?= format_currency($item-&gt;single_price()) ?&gt;&lt;/td&gt;
        &lt;td&gt;&lt;?= format_currency($item-&gt;discount()) ?&gt;&lt;/td&gt;
        &lt;th&gt;&lt;?= format_currency($item-&gt;total_price()) ?&gt;&lt;/th&gt;
      &lt;/tr&gt;
      &lt;? endforeach ?&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;Subtotal: &lt;/td&gt;
      &lt;th&gt;&lt;?= format_currency($subtotal) ?&gt;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Discount: &lt;/td&gt;
      &lt;th&gt;&lt;?= format_currency($discount) ?&gt;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;? foreach ($product_taxes as $tax): ?&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;?= ($tax-&gt;name) ?&gt;: &lt;/td&gt;
        &lt;th&gt;&lt;?= format_currency($tax-&gt;total) ?&gt;&lt;/th&gt;
      &lt;/tr&gt;
    &lt;? endforeach ?&gt;
    &lt;tr&gt;
      &lt;td&gt;Shipping: &lt;/td&gt;
      &lt;th&gt;&lt;?= format_currency($shipping_quote) ?&gt;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;? foreach ($shipping_taxes as $tax): ?&gt;
      &lt;tr&gt;
        &lt;td&gt;Shipping tax (&lt;?= ($tax-&gt;name) ?&gt;): &lt;/td&gt;
        &lt;th&gt;&lt;?= format_currency($tax-&gt;rate) ?&gt;&lt;/th&gt;
      &lt;/tr&gt;
    &lt;? endforeach ?&gt;
  &lt;/table&gt;
  
  &lt;h3&gt;Total&lt;/h3&gt;
  &lt;p&gt;&lt;?= format_currency($total) ?&gt;&lt;/p&gt;
  
  &lt;input
    type=&quot;image&quot;
    src=&quot;/resources/images/btn_place_order.gif&quot;
    alt=&quot;Place Order and Pay&quot;
    onclick=&quot;return $(this).getForm().sendRequest('shop:on_checkoutPlaceOrder')&quot;/&gt;
&lt;/form&gt;</pre></div><h3>Posting forms without AJAX</h3>
<p>If you don't want use AJAX for posting the checkout forms, please use a simple SUBMIT element with the "submit" name: <div class="codeblock"><pre class="brush:php; collapse: false">&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Next&quot;/&gt;</pre></div></p>
<h4>See also:</h4>
<ul>
<li><a href="automatic_customer_registration.html">Automatic customer registration</a></li>
</ul>
        
        <p>Next: <a href="implementing_one_step_checkout.html">Implementing a One-Step Checkout</a><br/>Previous: <a href="customer_order_notes_in_checkout.html">Adding a Field for Customer Order Notes in Checkout</a><br/>Return to <a href="checkout_process.html">Checkout Process</a></p>
        
              </div>
      
            <div class="wrap12 commentsWrap">
		<div id="thread"></div>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
		var disqus_identifier = "wiki_page_146"; //[Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
		var disqus_url = "http://v1.lemonstand.com/docs/implementing_the_step_by_step_checkout/";
		var disqus_title = "Implementing the Step-By-Step Checkout";
		(function() {
		 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		 dsq.src = 'http://lemonstand.disqus.com/embed.js';
		 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=lemonstand">comments powered by Disqus.</a></noscript>

      </div><!--/commentsWrap-->
              
          </div><!--/content-->
    </div><!-- /contentWrapper -->
</div><!--/wrapper-->
<div id="footer">
  <div id="footerContent">
    <div class="wrap12">
	    <div class="col4">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">Learn About The New LemonStand Cloud</span></li><li id="" class="level1"><a href="https://lemonstand.com" title="More information" class="title">More information</a></li><li id="" class="level1"><a href="https://lemonstand.com/showcase" title="LemonStand Showcase" class="title">LemonStand Showcase</a></li><li id="" class="level1"><a href="https://lemonstand.com/features" title="LS Cloud Features" class="title">LS Cloud Features</a></li><li id="" class="level1"><a href="https://lemonstand.com/pricing" title="LS Cloud Pricing" class="title">LS Cloud Pricing</a></li><li id="" class="level1"><a href="https://lemonstand.com/signup" title="LS Cloud Free Trial" class="title">LS Cloud Free Trial</a></li><li id="" class="level1"><a href="http://blog.lemonstand.com" title="eCommerce Blog" class="title">eCommerce Blog</a></li>			</ul>
	    </div>
	    <!--<div class="col2">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">About V1</span></li><li id="" class="level1"><a href="/gallery-oldurl" title="V1 Customer Gallery" class="title">V1 Customer Gallery</a></li><li id="" class="level1"><a href="/buy" title="Buy V1 License" class="title">Buy V1 License</a></li><li id="" class="level1"><a href="/freetrial" title="V1 Trial License" class="title">V1 Trial License</a></li>			</ul>
	    </div>-->
	    <div class="col2">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">V1 Community</span></li><li id="" class="level1"><a href="http://v1.lemonstand.com/marketplace" title="Marketplace" class="title">Marketplace</a><ul><li id="" class="level2"><a href="http://v1.lemonstand.com/marketplace/category/modules/" title="V1 Modules" class="title">V1 Modules</a></li><li id="" class="level2"><a href="http://v1.lemonstand.com/marketplace/category/themes/" title="V1 Themes" class="title">V1 Themes</a></li><li id="" class="level2"><a href="http://v1.lemonstand.com/marketplace/ideas/all/" title="V1 Ideas" class="title">V1 Ideas</a></li></ul></li><li id="" class="level1"><a href="../partners.html" title="Partners" class="title">Partners</a></li><li id="" class="level1"><a href="http://forum.lemonstandapp.com/" title="Community Forums" class="title">Community Forums</a></li>			</ul>
	    </div>
	    <div class="col3">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">V1 Support</span></li><li id="" class="level1"><a href="../myaccount.html" title="My Account" class="title">My Account</a><ul><li id="" class="level2"><a href="http://v1.lemonstand.com/myaccount/tickets" title="V1 Support Tickets" class="title">V1 Support Tickets</a></li></ul></li><li id="" class="level1"><a href="../docs.html" title="Documentation" class="title">Documentation</a><ul><li id="" class="level2"><a href="ecommerce_guide.html" title="V1 Merchant's Guide" class="title">V1 Merchant's Guide</a></li><li id="" class="level2"><a href="developer_s_guide/index.html" title="V1 Developer's Guide" class="title">V1 Developer's Guide</a></li><li id="" class="level2"><a href="../api.html" title="V1 API Docs" class="title">V1 API Docs</a></li></ul></li>			</ul>
	    </div>
	    <!--<div class="col3 share">
	    	<div>
		    	<a href="https://twitter.com/lemonstand" class="twitter-follow-button" data-show-count="false">Follow @lemonstand</a>
		    	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	    	</div>
	    	
	    	<div>
	    		<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Ffacebook.com%2Flemonstand&amp;send=false&amp;layout=button_count&amp;width=200&amp;show_faces=false&amp;font=arial&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=194533163908263" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90; height:21px;" allowTransparency="true"></iframe>
	    	</div>
	    	

	    	<div class="g-plusone" data-size="medium" data-href="http://lemonstand.com"></div>
	    	
	    	<div id="footer_newsletter">
	    		<h5>Get Email updates (It's Free)</h5>
	    		<form method="post" action="/" onsubmit="return subscribe_email(this, 'footer_newsletter', 'site:footer:newsletter')">
				    <input type="hidden" name="format" value="h" />
				    <input type="text" name="email" value="Email Address" id="optInEmail" class="formField" />
				    <input type="submit" value="Sign-Up" id="optInBtn" class="button small yellow" />
				    <p>We'll keep your email safe. Promise.</p>
			  </form>
  			</div>
	    </div>-->
    </div>
    <div class="col12 terms">
      <p>Copyright &copy; 2018 LemonStand eCommerce Inc. All Rights Reserved. <a href="../tos/index.html">Terms &amp; Conditions</a> | <a href="../privacy-policy/index.html">Privacy Policy</a></p>
    </div>
  </div><!--/footerContent-->
  <div style="clear: both; width: 960p;">&nbsp;</div>
</div><!--/footer-->



<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<!-- affiliate -->
<script type="text/javascript"><!--
document.write(unescape("%3Cscript id='pap_x2s6df8d' src='" + (("https:" == document.location.protocol) ? "https://" : "http://") + 
"affiliate.lemonstandapp.com/scripts/trackjs.js' type='text/javascript'%3E%3C/script%3E"));//-->
</script>
<script type="text/javascript"><!--
PostAffTracker.setAccountId('default1');
try {
PostAffTracker.track();
} catch (err) { }
//-->
</script>
<!-- /affiliate -->
<script type="text/javascript">
  // Track GA variables
  var _gaq = _gaq || [];
  
  _gaq.push(['_setCustomVar', 1, 'Visitor Type', 'Guest', 1]);
  _gaq.push(['_setCustomVar', 2, 'Partner', 'No', 1]);
  
  
  _gaq.push(['_setCustomVar', 4, 'Author', 'No', 1]);
</script>

<!--CrazyEgg-->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0000/6128.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>
	<!--AdRoll-->
	<script type="text/javascript">
	adroll_adv_id = "QICDG4SA4BCD7BH2B4E4OA";
	adroll_pix_id = "BZOADVG5ZFG4XATGXBKRV7";
	(function () {
	var oldonload = window.onload;
	window.onload = function(){
	   __adroll_loaded=true;
	   var scr = document.createElement("script");
	   var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
	   scr.setAttribute('async', 'true');
	   scr.type = "text/javascript";
	   scr.src = host + "/j/roundtrip.js";
	   ((document.getElementsByTagName('head') || [null])[0] ||
	    document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
	   if(oldonload){oldonload()}};
	}());
	</script>
	<!-- Pathful tracking -->
<script>
var PF_APPID = "3b5537e5529b89e5";
setTimeout(function(){ var d = document; 
s = d.createElement('script');
s.type = 'text/javascript'; s.async = true;
s.src = ("https:" == document.location.protocol) ? 
"https://ssl.pathful.com/js/scripts/secure.js"
: "http://s.pathful.com/js/scripts/capture.js";
document.body.appendChild(s, d);
}, 1);
</script>

</body>
 </html>