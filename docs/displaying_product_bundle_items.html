<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">    
<html xmlns="http://www.w3.org/1999/xhtml" class="mac">
<head>
    <title>LemonStand Version 1 - Displaying Product Bundle Items</title>
  <link rel="shortcut icon" href="../favicon.ico" />
  <link href="http://feeds.feedburner.com/lemonstand" type="application/rss+xml" rel="alternate" title="LemonStand blog" />
  <link href="http://feeds.feedburner.com/LemonstandReleaseNotes" type="application/rss+xml" rel="alternate" title="LemonStand release notes" />

  <link rel="stylesheet" type="text/css" href="../ls_css_combine/index.html@file[]=%252Fresources%252Fcss%252Fgrid.css&amp;file[]=%252Fresources%252Fcss%252Fformsframework.css&amp;file[]=%252Fresources%252Fcss%252Fscreen.css&amp;file[]=%252Fresources%252Fcss%252Fjquery.fancybox.css&amp;file[]=%252Fresources%252.css"/>

  <script type="text/javascript" src="../ls_javascript_combine/index.html@file[]=%252Fresources%252Fjs%252Fjquery-1.7.1.min.js&amp;file[]=%252Fresources%252Fjs%252Ftwitter.js&amp;file[]=%252Fresources%252Fjs%252Fjquery.noconflict.js&amp;file[]=%252Fmodules%252Fcms%252Fresources%252Fjavascript%252Ff"></script>
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic|Playfair+Display:400,400italic' rel='stylesheet' type='text/css'>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Language" content="en"/>
  <meta name="keywords" content="" />
  <meta name="description" content="" />

  <meta property="fb:app_id" content="194533163908263"/>


   
  <link type="text/css" rel="stylesheet" href="../resources/shl/styles/shCore.css" />
  <link type="text/css" rel="stylesheet" href="../resources/shl/styles/shThemeRDark.css" />  
  <script type="text/javascript" src="../ls_javascript_combine/index.html@file[]=%252Fresources%252Fjs%252Fjquery-ui-1.8.11.custom.min.js&amp;file[]=%252Fresources%252Fshl%252Fscripts%252FshCore.js&amp;file[]=%252Fresources%252Fshl%252Fscripts%252FshBrushJScript.js&amp;file[]=%252Fresources%252Fs"></script>
  
  <script type="text/javascript">
    SyntaxHighlighter.config.clipboardSwf = '/resources/shl/scripts/clipboard.swf';
    SyntaxHighlighter.all();
    SyntaxHighlighter.defaults.gutter = false;
	SyntaxHighlighter.config.strings.expandSource = "Click to expand the code block";
        
    window.addEvent('domready', function() {
      var $ = jQuery;

      $(".thumbnailWrap a").fancybox({      
         'zoomSpeedIn': 300,
         'zoomSpeedOut': 300,
         'overlayShow': true,
         'titleShow'      : 'true',
         'overlayOpacity': .6
       });
       
       jQuery(".code-tabs").tabs();
    });
  </script>  
  <link rel="stylesheet" type="text/css" href="../resources/css/syntax_highlightier.css@1.css" />
  <link rel="stylesheet" type="text/css" href="../resources/css/wiki.css@1.css" />
  
</head>
<body id="b_help" class="mac">
  <div id="wrapper">
    <div id="headerWrapper">
	  	<div style="background:#333;color:#fff;text-align:center;padding:20px 0;">
	  		<p style="color:#eaeaea">This is the documentation for LemonStand V1, which has been discontinued. You can <a href="https://lemonstand.com/v1tocloud">learn more and upgrade your store here</a>.</p>
	  	</div>
       <div id="header">
      <a href="../index.html" id="headerLogo"><img src="../resources/i/lemonstand_logo.png" alt="LemonStand" /></a>      
      	<p id="contactUs"><span data-icon="&#xe04f;" aria-hidden="true"></span> <a href="tel://1-855-332-0555"><strong>1-855-332-0555</strong></a> &nbsp;&nbsp;&nbsp;<span data-icon="&#xe03e;" aria-hidden="true"> <a href="mailto:sales@lemonstand.com"><strong>sales@lemonstand.com</strong></a>&nbsp;&nbsp;&nbsp; 
      			<span data-icon="&#xe016;" aria-hidden="true"></span> <a id="myaccont_login" href="http://v1.lemonstand.com/myaccount/"><strong>Log In</strong></a>
			</p>

      <div id="navigation">
		<ul>
		<!-- <li class="dropdown"><span>Tour &#9662;</span>
			<ul>
				<li class="first"><a href="/tour/">Take a Tour</a></li>
				<li class="last"><a href="/features/customization/">Features</a></li>
			</ul>
		</li> -->
		<!--<li><a href="/features/">Features</a></li>
		<li><a href="/gallery/">Gallery</a></li>-->
		<li><a href="http://v1.lemonstand.com/marketplace/">Marketplace</a></li>
		<!--<li><a href="/buy/">Pricing</a></li>-->
		<li class="dropdown last"><span>Resources &#9662;</span>
			<ul>              
			  <li class="first"><a href="../docs.html">Documentation</a></li>
			  <li><a href="api_function_and_class_reference/index.html">API</a></li>
			  <li id="n_forum"><a href="http://forum.lemonstand.com">Forum</a></li>
			  <li><a href="http://v1.lemonstand.com/myaccount/tickets/">Technical Support</a></li>
			  <li><a href="http://forum.lemonstandapp.com/index.php?app=tracker&showproject=2">Issue Tracker</a></li>
			  <li><a href="http://v1.lemonstand.com/release-notes/">Release Notes</a></li>
			  <!--<li><a href="/faq/">FAQ</a></li>-->
			  <li class="last"><a href="http://blog.lemonstand.com">Blog</a></li>
			</ul>
		</li>
		<li class="dropdown"><span>Partners &#9662;</span>
			<ul>
				<li class="first"><a href="../partners.html">Certified Partners</a></li>
				<li class="last"><a href="../hire-developers/index.html">Hire a Freelancer</a></li>
			</ul>
		
		</li>
        </ul>
      </div><!--/navigation-->      
      
      	    </div><!--/header-->
    </div><!-- /headerWrapper -->    
    <!-- <div id="topContentWrapper">  
      <div id="topContent">
        <div id="topCol1">
          <h1>LemonStand <span>Documentation</span></h1>
        </div>
      </div>
    </div> -->
    <div id="contentWrapper">  
      <div id="content" class="clearfix">
        <div class="wrap12">
	        <form method="get" action="http://v1.lemonstand.com/docs_search">
        <div id="wiki_search">
          <input name="query" type="text" id="wiki_search_field"/>
          <input type="submit" id="btn-doc-search" class="awesome blue large" value="Search"/>
          <div class="wiki_clear"></div>
        </div>
      </form>
    </div>
  
          <div class="col12 wiki_page_content">
        <div class="wiki_breadcrumbs"><ul class="wiki_toc"><li><a href="front_page.html">LemonStand</a></li><li><a href="developer_guide.html">Developer Guide</a></li><li><a href="products.html">Products</a></li><li><a href="displaying_a_list_of_products.html">Displaying a List of Products</a></li><li class="last">Displaying Product Bundle Items</li></ul></div>
        <div id="wiki-cta">
        	<h3>LemonStand Version 1 Has Been Discontinued</h1>
        	<p>This documentation is for LemonStand Version 1. LemonStand is now offered as a cloud-based eCommerce platform.<br> You can try the new LemonStand and <a href="https://lemonstand.com/v1tocloud">learn about upgrading here</a>.</p>
        </div>
        
        <h2>Displaying Product Bundle Items</h2>
        
        <p>The task of displaying product bundle items is simplified by <a href="class_shop_bundlehelper.html">Shop_BundleHelper</a> class, which has methods which incapsulate low-level Bundles API. You can find the bundle feature implementation in <a href="http://v1.lemonstand.com/marketplace/theme/simplicity/">Simplicity theme</a>. In this article we use simplified code snippets from this theme. Please note that the used markup (for example tables) is not required. You can use any markup in your store. The only requirement is saving the correct control names.</p>
<p>Bundle items section should be implemented in a separate partial, to be updatable with AJAX. Create a new partial and name it <strong>shop:bundle</strong>. Add this partial to the product page, above the Add to Cart button, and wrap it into a DIV element with a specific identifier: <div class="code-tabs" id="shop_bundle_render"><ul><li><a href="displaying_product_bundle_items.html#shop_bundle_render-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#shop_bundle_render-twig">Twig</a></li></ul><div id="shop_bundle_render-php"><div class="codeblock"><pre class="brush:php; collapse: false">&lt;div id=&quot;product_bundle_items&quot;&gt;&lt;? $this-&gt;render_partial('shop:bundle') ?&gt;&lt;/div&gt;</pre></div></div><div id="shop_bundle_render-twig"><div class="codeblock"><pre class="brush:twig; collapse: false">&lt;div id=&quot;product_bundle_items&quot;&gt;{{ render_partial('shop:bundle') }}&lt;/div&gt;</pre></div></div></div></p>
<p>The <strong>shop:bundle</strong> partial should output a list of product bundle items and render another partial, which output products for each bundle item. Below you will find the <strong>shop:bundle</strong> partial content: <div class="code-tabs" id="shop_bundle_partial"><ul><li><a href="displaying_product_bundle_items.html#shop_bundle_partial-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#shop_bundle_partial-twig">Twig</a></li></ul><div id="shop_bundle_partial-php"><div class="codeblock"><pre class="brush:php; collapse: true">&lt;? if ($product-&gt;bundle_items-&gt;count): ?&gt;
  &lt;h3&gt;Bundle items&lt;/h3&gt;

  &lt;table&gt;
    &lt;? foreach ($product-&gt;bundle_items as $item): ?&gt;
      &lt;tr&gt;
        &lt;th&gt;
          &lt;?= h($item-&gt;name) ?&gt;
          &lt;? if ($item-&gt;description): ?&gt;
            &lt;p&gt;&lt;?= h($item-&gt;description) ?&gt;&lt;/p&gt;
          &lt;? endif ?&gt;
        &lt;/th&gt;
        &lt;td&gt;&lt;? $this-&gt;render_partial('shop:bundle_item_products', array('item'=&gt;$item)) ?&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;? endforeach ?&gt;
  &lt;/table&gt;
&lt;? endif ?&gt;</pre></div></div><div id="shop_bundle_partial-twig"><div class="codeblock"><pre class="brush:twig; collapse: true">{% if field(product, 'bundle_items').count %}
  &lt;h3&gt;Bundle items&lt;/h3&gt;

  &lt;table&gt;
    {% for item in field(product, 'bundle_items') %}
      &lt;tr&gt;
        &lt;th&gt;
          {{ item.name }}
          {% if item.description %}
            &lt;p&gt;{{ item.description }}&lt;/p&gt;
          {% endif %}
        &lt;/th&gt;
        &lt;td&gt;{{ render_partial('shop:bundle_item_products', {'item': item}) }}&lt;/td&gt;
      &lt;/tr&gt;
    {% endfor %}
  &lt;/table&gt;
{% endif %}</pre></div></div></div></p>
<p>The code iterates through the product bundle item list and displays a table row for each item. In the first column it outputs the bundle item name and description, and in the second column the <strong>shop:bundle_item_products</strong> is rendered. This partial outputs bundle item products in accordance with the bundle item configuration.</p>
<p><img class="wiki_image_frame" src="../resources/i/wiki/subscriptions/bundle-items.png" alt="" /></p>
<h4>shop:bundle_item_products partial</h4>
<p>Create a new partial and name it shop:bundle_item_products. This partial should output products for a specific bundle item, which is passed as the partial parameter (see the <strong>item</strong> partial parameter in the code snippet above). The partial intensively uses the Shop_BundleHelper class. Partial code: <div class="code-tabs" id="bundle_item_products"><ul><li><a href="displaying_product_bundle_items.html#bundle_item_products-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#bundle_item_products-twig">Twig</a></li></ul><div id="bundle_item_products-php"><div class="codeblock"><pre class="brush:php; collapse: true">&lt;? if ($item-&gt;control_type == 'dropdown'):
  $selected_item_product = Shop_BundleHelper::get_bundle_item_product_item($item);
  $selected_product = Shop_BundleHelper::get_bundle_item_product($item, $selected_item_product);  
?&gt;
  &lt;select 
    name=&quot;&lt;?= Shop_BundleHelper::get_product_selector_name($item, $selected_item_product) ?&gt;&quot; 
    onchange=&quot;$(this).getForm().sendRequest('on_action', {update: {'product_bundle_items': 'shop:bundle'}})&quot;&gt;
    
    &lt;? if (!$item-&gt;is_required): ?&gt;
      &lt;option value=&quot;&quot;&gt;&amp;lt;please select&amp;gt;&lt;/option&gt;
    &lt;? endif ?&gt;
    
    &lt;? foreach ($item-&gt;item_products as $item_product): ?&gt;
      &lt;option 
        value=&quot;&lt;?= Shop_BundleHelper::get_product_selector_value($item_product) ?&gt;&quot; 
        &lt;?= option_state(Shop_BundleHelper::is_item_product_selected($item, $item_product), true) ?&gt;&gt;
          &lt;?= h($item_product-&gt;product-&gt;name) ?&gt;
      &lt;/option&gt;
    &lt;? endforeach ?&gt;
  &lt;/select&gt;

  &lt;? $this-&gt;render_partial('shop:bundle_product_parameters', array(
    'product'=&gt;$selected_product, 
    'item_product'=&gt;$selected_item_product, 
    'item'=&gt;$item)) ?&gt;

  &lt;?= Shop_BundleHelper::get_item_hidden_fields($item, $selected_item_product) ?&gt;
&lt;? elseif ($item-&gt;control_type == 'checkbox'): ?&gt;
&lt;ul&gt;
  &lt;? 
    foreach ($item-&gt;item_products as $item_product):
      $selected_product = Shop_BundleHelper::get_bundle_item_product($item, $item_product);
      $is_selected = Shop_BundleHelper::is_item_product_selected($item, $item_product);
  ?&gt;
  &lt;li&gt;
    &lt;label&gt;
      &lt;input 
        type=&quot;checkbox&quot; 
        name=&quot;&lt;?= Shop_BundleHelper::get_product_selector_name($item, $item_product) ?&gt;&quot; 
        value=&quot;&lt;?= Shop_BundleHelper::get_product_selector_value($item_product) ?&gt;&quot; 
        &lt;?= checkbox_state($is_selected) ?&gt;
       /&gt;
      &lt;?= h($item_product-&gt;product-&gt;name) ?&gt;
    &lt;/label&gt;
     
      &lt;div class=&quot;&lt;?= $is_selected ? null : 'hidden' ?&gt;&quot;&gt;
        &lt;? $this-&gt;render_partial('shop:bundle_product_parameters', array(
          'product'=&gt;$selected_product, 
          'item_product'=&gt;$item_product, 
          'item'=&gt;$item)) ?&gt;
      &lt;/div&gt;
  &lt;/li&gt;
  &lt;? endforeach ?&gt;
&lt;/ul&gt;
&lt;? else: ?&gt;
  &lt;ul&gt;
    &lt;? if (!$item-&gt;is_required): ?&gt;
      &lt;li&gt;
        &lt;label&gt;
          &lt;input 
            type=&quot;radio&quot; 
            name=&quot;&lt;?= Shop_BundleHelper::get_product_selector_name($item,null) ?&gt;&quot; 
            value=&quot;&quot; 
            checked=&quot;checked&quot;/&gt;
          No, thank you.
        &lt;/label&gt;
      &lt;/li&gt;
    &lt;? endif ?&gt;
    &lt;?
      foreach ($item-&gt;item_products as $item_product):
        $selected_product = Shop_BundleHelper::get_bundle_item_product($item, $item_product);
        $is_selected = Shop_BundleHelper::is_item_product_selected($item, $item_product);
    ?&gt;
      &lt;li&gt;
        &lt;label&gt;
          &lt;input 
            type=&quot;radio&quot; 
            name=&quot;&lt;?= Shop_BundleHelper::get_product_selector_name($item, $selected_product) ?&gt;&quot;
            value=&quot;&lt;?= Shop_BundleHelper::get_product_selector_value($item_product) ?&gt;&quot; 
            &lt;?= radio_state($is_selected) ?&gt;
           /&gt;
          &lt;?= h($item_product-&gt;product-&gt;name) ?&gt;
        &lt;/label&gt;
    
        &lt;div class=&quot;&lt;?= $is_selected ? null : 'hidden' ?&gt;&quot;&gt;
          &lt;? $this-&gt;render_partial('shop:bundle_product_parameters', array(
            'product'=&gt;$selected_product, 
            'item_product'=&gt;$item_product, 
            'item'=&gt;$item)) ?&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;? endforeach ?&gt;
  &lt;/ul&gt;
&lt;? endif ?&gt;</pre></div></div><div id="bundle_item_products-twig"><div class="codeblock"><pre class="brush:twig; collapse: true">{% if item.control_type == 'dropdown' %}
  {% set selected_item_product = method('Shop_BundleHelper', 'get_bundle_item_product_item', item) %}
  {% set selected_product = method('Shop_BundleHelper', 'get_bundle_item_product', item, selected_item_product) %}
  &lt;select 
    name=&quot;{{ method('Shop_BundleHelper', 'get_product_selector_name', item, selected_item_product) }}&quot; 
    onchange=&quot;$(this).getForm().sendRequest('on_action', {update: {'product_bundle_items': 'shop:bundle'}})&quot;&gt;
    
    {% if item.is_required %}
      &lt;option value=&quot;&quot;&gt;&amp;lt;please select&amp;gt;&lt;/option&gt;
    {% endif %}
    
    {% for item_product in item.item_products %}
      &lt;option 
        value=&quot;{{ method('Shop_BundleHelper', 'get_product_selector_value', item_product) }}&quot; 
        {{ option_state(method('Shop_BundleHelper', 'is_item_product_selected', item, item_product), true) }}&gt;
          {{ item_product.product.name }}
      &lt;/option&gt;
    {% endfor %}
  &lt;/select&gt;

  {{ render_partial('shop:bundle_product_parameters', {
    'product': selected_product, 
    'item_product': selected_item_product, 
    'item': item}) }}

  {{ method('Shop_BundleHelper', 'get_item_hidden_fields', item, selected_item_product) }}
{% elseif item.control_type == 'checkbox' %}
&lt;ul&gt;
  {% for item_product in item.item_products %}
    {% set selected_product = method('Shop_BundleHelper', 'get_bundle_item_product', item, item_product) %}
    {% set is_selected = method('Shop_BundleHelper', 'is_item_product_selected', item, item_product) %}
  &lt;li&gt;
    &lt;label&gt;
      &lt;input 
        type=&quot;checkbox&quot; 
        name=&quot;{{ method('Shop_BundleHelper', 'get_product_selector_name', item, item_product) }}&quot; 
        value=&quot;{{ method('Shop_BundleHelper', 'get_product_selector_value', item_product) }}&quot; 
        {{ checkbox_state(is_selected) }}
       /&gt;
      {{ item_product.product.name }}
    &lt;/label&gt;
     
      &lt;div class=&quot;{{ is_selected ? null : 'hidden' }}&quot;&gt;
        {{ render_partial('shop:bundle_product_parameters', {
          'product': selected_product, 
          'item_product': item_product, 
          'item': item}) }}
      &lt;/div&gt;
  &lt;/li&gt;
  {% endfor %}
&lt;/ul&gt;
&lt;? else: ?&gt;
  &lt;ul&gt;
    {% if item.is_required %}
      &lt;li&gt;
        &lt;label&gt;
          &lt;input 
            type=&quot;radio&quot; 
            name=&quot;{{ method('Shop_BundleHelper', 'get_product_selector_name', item, null) }}&quot; 
            value=&quot;&quot; 
            checked=&quot;checked&quot;/&gt;
          No, thank you.
        &lt;/label&gt;
      &lt;/li&gt;
    {% endif %}
    {% for item_product in item.item_products %}
      {% set selected_product = method('Shop_BundleHelper', 'get_bundle_item_product', item, item_product) %}
      {% set is_selected = method('Shop_BundleHelper', 'is_item_product_selected', item, item_product) %}
      &lt;li&gt;
        &lt;label&gt;
          &lt;input 
            type=&quot;radio&quot; 
            name=&quot;{{ method('Shop_BundleHelper', 'get_product_selector_name', item, selected_product) }}&quot;
            value=&quot;{{ method('Shop_BundleHelper', 'get_product_selector_value', item_product) }}&quot; 
            {{ radio_state(is_selected) }}
           /&gt;
          {{ item_product.product.name }}
        &lt;/label&gt;
    
        &lt;div class=&quot;{{ is_selected ? null : 'hidden' }}&quot;&gt;
          {{ render_partial('shop:bundle_product_parameters', {
            'product': selected_product, 
            'item_product': item_product, 
            'item': item}) }}
        &lt;/div&gt;
      &lt;/li&gt;
    {% endfor %}
  &lt;/ul&gt;
{% endif %}</pre></div></div></div></p>
<p>If you explore the code, you will see that it is quite simple. It first determines what control type should be used for the bundle item and then outputs corresponding control(s) taking into account whether the item is required. The code refers to the <strong>shop:bundle_product_parameters</strong> partial which you should create.</p>
<h4>shop:bundle_product_parameters partial</h4>
<p>Create a new partial and name it shop:bundle_product_parameters. This partial should output options, extra options and grouped product for a specific bundle item product. For simplicity's sake we have split this partial to a number of other partials, but you can output all possible product parameters in a single partial. Partial code: <div class="code-tabs" id="bundle_product_parameters"><ul><li><a href="displaying_product_bundle_items.html#bundle_product_parameters-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#bundle_product_parameters-twig">Twig</a></li></ul><div id="bundle_product_parameters-php"><div class="codeblock"><pre class="brush:php; collapse: true">&lt;? if ($item_product &amp;&amp; $product): ?&gt;  
  &lt;? if ($product-&gt;images-&gt;count): ?&gt;
    &lt;a 
      title=&quot;&lt;?= h($product-&gt;images-&gt;first-&gt;title) ?&gt;&quot; 
      href=&quot;&lt;?= $product-&gt;images-&gt;first-&gt;getThumbnailPath(500, 'auto') ?&gt;&quot;&gt;
        &lt;img src=&quot;&lt;?= $product-&gt;images-&gt;first-&gt;getThumbnailPath(50, 'auto') ?&gt;&quot; alt=&quot;&quot; /&gt;
    &lt;/a&gt;
  &lt;? endif ?&gt;

  &lt;?
    if ($product &amp;&amp; ($product-&gt;grouped_products-&gt;count || $product-&gt;options-&gt;count)):
  ?&gt;
    &lt;table&gt;
      &lt;? 
        $this-&gt;render_partial('shop:bundle_grouped_products', array(
          'product'=&gt;$product, 
          'item'=&gt;$item, 
          'item_product'=&gt;$item_product));

        $this-&gt;render_partial('shop:bundle_product_options', array(
          'product'=&gt;$product, 
          'item'=&gt;$item, 
          'item_product'=&gt;$item_product));
      ?&gt;
    &lt;/table&gt;
  &lt;? endif ?&gt;

  &lt;? 
    $this-&gt;render_partial('shop:bundle_product_extras', array(
      'product'=&gt;$product, 
      'item'=&gt;$item, 
      'item_product'=&gt;$item_product));

    $this-&gt;render_partial('shop:bundle_product_quantity', array(
      'product'=&gt;$product, 
      'item'=&gt;$item, 
      'item_product'=&gt;$item_product));
  ?&gt;
&lt;? endif ?&gt;</pre></div></div><div id="bundle_product_parameters-twig"><div class="codeblock"><pre class="brush:twig; collapse: true">{% if item_product and product %}
  {% if product.images.count %}
    &lt;a 
      title=&quot;{{ product.images.first.title }}&quot; 
      href=&quot;{{ product.images.first.getThumbnailPath(500, 'auto') }}&quot;&gt;
        &lt;img src=&quot;{{ product.images.first.getThumbnailPath(50, 'auto') }}&quot; alt=&quot;&quot; /&gt;
    &lt;/a&gt;
  {% endif %}

  {% if product and (field(product, 'grouped_products').count or product.options.count) %}
    &lt;table&gt;
      {{ render_partial('shop:bundle_grouped_products', {
          'product': product, 
          'item': item, 
          'item_product': item_product}) }}
      {{ render_partial('shop:bundle_product_options', {
          'product': product, 
          'item': item, 
          'item_product': item_product}) }}
    &lt;/table&gt;
  {% endif %}

  {{ render_partial('shop:bundle_product_extras', {
      'product': product, 
      'item': item, 
      'item_product': item_product}) }}
  {{ render_partial('shop:bundle_product_quantity', {
      'product': product, 
      'item': item, 
      'item_product': item_product}) }}
{% endif %}</pre></div></div></div></p>
<p><strong>shop:bundle_grouped_products</strong> partial output grouped products of a bundle item product. When a grouped product is selected, partial updates the bundle item user interface with AJAX. Partial code: <div class="code-tabs" id="bundle_grouped_products"><ul><li><a href="displaying_product_bundle_items.html#bundle_grouped_products-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#bundle_grouped_products-twig">Twig</a></li></ul><div id="bundle_grouped_products-php"><div class="codeblock"><pre class="brush:php; collapse: true">&lt;?
  if ($product &amp;&amp; $product-&gt;grouped_products-&gt;count):
?&gt;
  &lt;tr&gt;
    &lt;th&gt;&lt;?= h($product-&gt;grouped_menu_label) ?&gt;:&lt;/th&gt;
    &lt;td&gt;
      &lt;select 
        name=&quot;&lt;?= Shop_BundleHelper::get_product_control_name($item, $item_product, 'grouped_product') ?&gt;&quot;
        onchange=&quot;$(this).getForm().sendRequest('on_action', {update: {'product_bundle_items': 'shop:bundle'}})&quot;&gt;
        &lt;? foreach ($product-&gt;grouped_products as $cur_grouped_product): ?&gt;
          &lt;option 
            &lt;?= option_state($product-&gt;id, $cur_grouped_product-&gt;id) ?&gt; 
            value=&quot;&lt;?= $cur_grouped_product-&gt;id ?&gt;&quot;
          &gt;
            &lt;?= h($cur_grouped_product-&gt;grouped_option_desc) ?&gt;
          &lt;/option&gt;
        &lt;? endforeach ?&gt;
      &lt;/select&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;? endif ?&gt;</pre></div></div><div id="bundle_grouped_products-twig"><div class="codeblock"><pre class="brush:twig; collapse: true">{% if product and field(product, 'grouped_products').count %}
  &lt;tr&gt;
    &lt;th&gt;{{ field(product, 'grouped_menu_label') }}:&lt;/th&gt;
    &lt;td&gt;
      &lt;select 
        name=&quot;{{ method('Shop_BundleHelper', 'get_product_control_name', item, item_product, 'grouped_product') }}&quot;
        onchange=&quot;$(this).getForm().sendRequest('on_action', {update: {'product_bundle_items': 'shop:bundle'}})&quot;&gt;
        {% for cur_grouped_product in field(product, 'grouped_products') %}
          &lt;option 
            {{ option_state(product.id, cur_grouped_product.id) }} 
            value=&quot;{{ cur_grouped_product.id }}&quot;
          &gt;
            {{ cur_grouped_product.grouped_option_desc }}
          &lt;/option&gt;
        {% endfor %}
      &lt;/select&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
{% endif %}</pre></div></div></div></p>
<p><strong>shop:bundle_product_options</strong> partial outputs options of a bundle item product: <div class="code-tabs" id="bundle_product_options"><ul><li><a href="displaying_product_bundle_items.html#bundle_product_options-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#bundle_product_options-twig">Twig</a></li></ul><div id="bundle_product_options-php"><div class="codeblock"><pre class="brush:php; collapse: true">&lt;?
  if ($product &amp;&amp; $product-&gt;options-&gt;count):
    $control_name = Shop_BundleHelper::get_product_control_name($item, $item_product, 'options');
?&gt;
  &lt;? foreach ($product-&gt;options as $option): ?&gt;
  &lt;tr&gt;
    &lt;th&gt;&lt;?= h($option-&gt;name) ?&gt;:&lt;/th&gt;
    &lt;td&gt;
      &lt;select name=&quot;&lt;?= $control_name.'['.$option-&gt;option_key.']' ?&gt;&quot;&gt;
        &lt;?
          $values = $option-&gt;list_values();
          foreach ($values as $value):      
            $is_selected = Shop_BundleHelper::is_product_option_selected($option, $value, $item, $item_product);
        ?&gt;
          &lt;option &lt;?= option_state($is_selected, true) ?&gt; value=&quot;&lt;?= h($value) ?&gt;&quot;&gt;&lt;?= h($value) ?&gt;&lt;/option&gt;
        &lt;? endforeach ?&gt;
      &lt;/select&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;? endforeach ?&gt;
&lt;? endif ?&gt;</pre></div></div><div id="bundle_product_options-twig"><div class="codeblock"><pre class="brush:twig; collapse: true">{% if product and product.options.count %}
{% set control_name = method('Shop_BundleHelper', 'get_product_control_name', item, item_product, 'options') %}
  {% for option in product.options %}
  &lt;tr&gt;
    &lt;th&gt;{{ option.name }}&lt;/th&gt;
    &lt;td&gt;
      &lt;select name=&quot;{{ control_name~'['~option.option_key~']' }}&quot;&gt;
        {% set values = option.list_values() %}
        {% for value in values %}
          {% set is_selected = method('Shop_BundleHelper', 'is_product_option_selected', option, value, item, item_product) %}
          &lt;option {{ option_state(is_selected, true) }} value=&quot;{{ value }}&quot;&gt;{{ value }}&lt;/option&gt;
        {% endfor %}
      &lt;/select&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  {% endfor %}
{% endif %}</pre></div></div></div></p>
<p><strong>shop:bundle_product_extras</strong> partial outputs extra options of a bundle item product. Partial code: <div class="code-tabs" id="bundle_product_extras"><ul><li><a href="displaying_product_bundle_items.html#bundle_product_extras-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#bundle_product_extras-twig">Twig</a></li></ul><div id="bundle_product_extras-php"><div class="codeblock"><pre class="brush:php; collapse: true">&lt;?
  if ($product &amp;&amp; $product-&gt;extra_options-&gt;count):
    $control_name = Shop_BundleHelper::get_product_control_name($item, $item_product, 'extra_options');
?&gt;
  &lt;table&gt;
    &lt;? foreach ($product-&gt;extra_options as $option):
      $is_checked = Shop_BundleHelper::is_product_extra_option_selected($option, $item, $item_product);
    ?&gt;
    &lt;tr&gt;
      &lt;td&gt;
        &lt;input 
          name=&quot;&lt;?= $control_name.'['.$option-&gt;option_key.']' ?&gt;&quot; 
          &lt;?= checkbox_state($is_checked) ?&gt; 
          id=&quot;extra_option_&lt;?= $option-&gt;id ?&gt;&quot; 
          value=&quot;1&quot; 
          type=&quot;checkbox&quot;/&gt;
      &lt;/td&gt;
      &lt;th&gt;
        &lt;label for=&quot;extra_option_&lt;?= $option-&gt;id ?&gt;&quot;&gt;&lt;?= h($option-&gt;description) ?&gt;:&lt;/label&gt;
        &lt;? if ($option-&gt;price &gt; 0): ?&gt;
          + &lt;?= format_currency($option-&gt;get_price($product)) ?&gt;
        &lt;? else: ?&gt;
          free
        &lt;? endif ?&gt;
      &lt;/th&gt;
    &lt;/tr&gt;
    &lt;? endforeach ?&gt;
  &lt;/table&gt;
&lt;? endif ?&gt;</pre></div></div><div id="bundle_product_extras-twig"><div class="codeblock"><pre class="brush:twig; collapse: true">{% if product and field(product, 'extra_options').count %}
  {% set control_name = method('Shop_BundleHelper', 'get_product_control_name', item, item_product, 'extra_options') %}

  &lt;table&gt;
    {% for option in field(product, 'extra_options') %}
      {% set is_checked = method('Shop_BundleHelper', 'is_product_extra_option_selected', option, item, item_product) %}
    &lt;tr&gt;
      &lt;td&gt;
        &lt;input 
          name=&quot;{{ control_name~'['~option.option_key~']' }}&quot; 
          {{ checkbox_state(is_checked) }}
          id=&quot;extra_option_{{ option.id }}&quot; 
          value=&quot;1&quot; 
          type=&quot;checkbox&quot;/&gt;
      &lt;/td&gt;
      &lt;th&gt;
        &lt;label for=&quot;extra_option_{{ option.id }}&quot;&gt;{{ option.description }}:&lt;/label&gt;
        {% if option.price &gt; 0 %}
          + {{ option.get_price(product)|currency }}
        {% else %}
          free
        {% endif %}
      &lt;/th&gt;
    &lt;/tr&gt;
    {% endfor %}
  &lt;/table&gt;
{% endif %}</pre></div></div></div></p>
<p><strong>shop:bundle_product_quantity</strong>&nbsp;partial outputs price and the quantity input field for a bundle item product. Partial code: <div class="code-tabs" id="bundle_product_quantity"><ul><li><a href="displaying_product_bundle_items.html#bundle_product_quantity-php">PHP</a></li><li><a href="displaying_product_bundle_items.html#bundle_product_quantity-twig">Twig</a></li></ul><div id="bundle_product_quantity-php"><div class="codeblock"><pre class="brush:php; collapse: false">Price: &lt;?= format_currency($item_product-&gt;get_price($product)) ?&gt;
&lt;? if ($item_product-&gt;allow_manual_quantity): ?&gt;
   &lt;input
      type=&quot;text&quot; 
      name=&quot;&lt;?= Shop_BundleHelper::get_product_control_name($item, $item_product, 'quantity') ?&gt;&quot; 
      value=&quot;&lt;?= Shop_BundleHelper::get_product_quantity($item, $item_product) ?&gt;&quot;/&gt;
&lt;? endif ?&gt;</pre></div></div><div id="bundle_product_quantity-twig"><div class="codeblock"><pre class="brush:twig; collapse: false">Price: {{ item_product.get_price(product)|currency }}
{% if item_product.allow_manual_quantity %}
  &lt;input
    type=&quot;text&quot; 
    name=&quot;{{ method('Shop_BundleHelper', 'get_product_control_name', item, item_product, 'quantity') }}&quot; 
    value=&quot;{{ method('Shop_BundleHelper', 'get_product_quantity', item, item_product) }}&quot;/&gt;
{% endif %}</pre></div></div></div></p>
        
        <p><br/>Previous: <a href="displaying_product_manufacturer_information.html">Displaying Product Manufacturer Information</a><br/>Return to <a href="displaying_a_list_of_products.html">Displaying a List of Products</a></p>
        
              </div>
      
            <div class="wrap12 commentsWrap">
		<div id="thread"></div>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
		var disqus_identifier = "wiki_page_390"; //[Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
		var disqus_url = "http://v1.lemonstand.com/docs/displaying_product_bundle_items/";
		var disqus_title = "Displaying Product Bundle Items";
		(function() {
		 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		 dsq.src = 'http://lemonstand.disqus.com/embed.js';
		 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=lemonstand">comments powered by Disqus.</a></noscript>

      </div><!--/commentsWrap-->
              
          </div><!--/content-->
    </div><!-- /contentWrapper -->
</div><!--/wrapper-->
<div id="footer">
  <div id="footerContent">
    <div class="wrap12">
	    <div class="col4">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">Learn About The New LemonStand Cloud</span></li><li id="" class="level1"><a href="https://lemonstand.com" title="More information" class="title">More information</a></li><li id="" class="level1"><a href="https://lemonstand.com/showcase" title="LemonStand Showcase" class="title">LemonStand Showcase</a></li><li id="" class="level1"><a href="https://lemonstand.com/features" title="LS Cloud Features" class="title">LS Cloud Features</a></li><li id="" class="level1"><a href="https://lemonstand.com/pricing" title="LS Cloud Pricing" class="title">LS Cloud Pricing</a></li><li id="" class="level1"><a href="https://lemonstand.com/signup" title="LS Cloud Free Trial" class="title">LS Cloud Free Trial</a></li><li id="" class="level1"><a href="http://blog.lemonstand.com" title="eCommerce Blog" class="title">eCommerce Blog</a></li>			</ul>
	    </div>
	    <!--<div class="col2">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">About V1</span></li><li id="" class="level1"><a href="/gallery-oldurl" title="V1 Customer Gallery" class="title">V1 Customer Gallery</a></li><li id="" class="level1"><a href="/buy" title="Buy V1 License" class="title">Buy V1 License</a></li><li id="" class="level1"><a href="/freetrial" title="V1 Trial License" class="title">V1 Trial License</a></li>			</ul>
	    </div>-->
	    <div class="col2">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">V1 Community</span></li><li id="" class="level1"><a href="http://v1.lemonstand.com/marketplace" title="Marketplace" class="title">Marketplace</a><ul><li id="" class="level2"><a href="http://v1.lemonstand.com/marketplace/category/modules/" title="V1 Modules" class="title">V1 Modules</a></li><li id="" class="level2"><a href="http://v1.lemonstand.com/marketplace/category/themes/" title="V1 Themes" class="title">V1 Themes</a></li><li id="" class="level2"><a href="http://v1.lemonstand.com/marketplace/ideas/all/" title="V1 Ideas" class="title">V1 Ideas</a></li></ul></li><li id="" class="level1"><a href="../partners.html" title="Partners" class="title">Partners</a></li><li id="" class="level1"><a href="http://forum.lemonstandapp.com/" title="Community Forums" class="title">Community Forums</a></li>			</ul>
	    </div>
	    <div class="col3">
	      	<ul>
			<li id="" class="menuHead level1"><span class="title">V1 Support</span></li><li id="" class="level1"><a href="../myaccount.html" title="My Account" class="title">My Account</a><ul><li id="" class="level2"><a href="http://v1.lemonstand.com/myaccount/tickets" title="V1 Support Tickets" class="title">V1 Support Tickets</a></li></ul></li><li id="" class="level1"><a href="../docs.html" title="Documentation" class="title">Documentation</a><ul><li id="" class="level2"><a href="ecommerce_guide.html" title="V1 Merchant's Guide" class="title">V1 Merchant's Guide</a></li><li id="" class="level2"><a href="developer_s_guide/index.html" title="V1 Developer's Guide" class="title">V1 Developer's Guide</a></li><li id="" class="level2"><a href="../api.html" title="V1 API Docs" class="title">V1 API Docs</a></li></ul></li>			</ul>
	    </div>
	    <!--<div class="col3 share">
	    	<div>
		    	<a href="https://twitter.com/lemonstand" class="twitter-follow-button" data-show-count="false">Follow @lemonstand</a>
		    	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	    	</div>
	    	
	    	<div>
	    		<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Ffacebook.com%2Flemonstand&amp;send=false&amp;layout=button_count&amp;width=200&amp;show_faces=false&amp;font=arial&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=194533163908263" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90; height:21px;" allowTransparency="true"></iframe>
	    	</div>
	    	

	    	<div class="g-plusone" data-size="medium" data-href="http://lemonstand.com"></div>
	    	
	    	<div id="footer_newsletter">
	    		<h5>Get Email updates (It's Free)</h5>
	    		<form method="post" action="/" onsubmit="return subscribe_email(this, 'footer_newsletter', 'site:footer:newsletter')">
				    <input type="hidden" name="format" value="h" />
				    <input type="text" name="email" value="Email Address" id="optInEmail" class="formField" />
				    <input type="submit" value="Sign-Up" id="optInBtn" class="button small yellow" />
				    <p>We'll keep your email safe. Promise.</p>
			  </form>
  			</div>
	    </div>-->
    </div>
    <div class="col12 terms">
      <p>Copyright &copy; 2018 LemonStand eCommerce Inc. All Rights Reserved. <a href="../tos/index.html">Terms &amp; Conditions</a> | <a href="../privacy-policy/index.html">Privacy Policy</a></p>
    </div>
  </div><!--/footerContent-->
  <div style="clear: both; width: 960p;">&nbsp;</div>
</div><!--/footer-->



<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<!-- affiliate -->
<script type="text/javascript"><!--
document.write(unescape("%3Cscript id='pap_x2s6df8d' src='" + (("https:" == document.location.protocol) ? "https://" : "http://") + 
"affiliate.lemonstandapp.com/scripts/trackjs.js' type='text/javascript'%3E%3C/script%3E"));//-->
</script>
<script type="text/javascript"><!--
PostAffTracker.setAccountId('default1');
try {
PostAffTracker.track();
} catch (err) { }
//-->
</script>
<!-- /affiliate -->
<script type="text/javascript">
  // Track GA variables
  var _gaq = _gaq || [];
  
  _gaq.push(['_setCustomVar', 1, 'Visitor Type', 'Guest', 1]);
  _gaq.push(['_setCustomVar', 2, 'Partner', 'No', 1]);
  
  
  _gaq.push(['_setCustomVar', 4, 'Author', 'No', 1]);
</script>

<!--CrazyEgg-->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0000/6128.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>
	<!--AdRoll-->
	<script type="text/javascript">
	adroll_adv_id = "QICDG4SA4BCD7BH2B4E4OA";
	adroll_pix_id = "BZOADVG5ZFG4XATGXBKRV7";
	(function () {
	var oldonload = window.onload;
	window.onload = function(){
	   __adroll_loaded=true;
	   var scr = document.createElement("script");
	   var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
	   scr.setAttribute('async', 'true');
	   scr.type = "text/javascript";
	   scr.src = host + "/j/roundtrip.js";
	   ((document.getElementsByTagName('head') || [null])[0] ||
	    document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
	   if(oldonload){oldonload()}};
	}());
	</script>
	<!-- Pathful tracking -->
<script>
var PF_APPID = "3b5537e5529b89e5";
setTimeout(function(){ var d = document; 
s = d.createElement('script');
s.type = 'text/javascript'; s.async = true;
s.src = ("https:" == document.location.protocol) ? 
"https://ssl.pathful.com/js/scripts/secure.js"
: "http://s.pathful.com/js/scripts/capture.js";
document.body.appendChild(s, d);
}, 1);
</script>

</body>
 </html>